<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>processChunk Test</title>
</head>
<body>
  <h1>processChunk Test</h1>
  <button id="testBtn">Run Test</button>
  <pre id="output"></pre>

  <script type="module">
    // Import resample from wave-resampler (assumes you installed it via npm and use a bundler like Vite/Webpack)
    import { resampler } from '/node_modules/wave-resampler/dist/wave-resampler.js';

    // Minimal JS version of SpeechConverter
    class SpeechConverter {
      processChunk(chunk) {
        console.log("chunk before:", chunk);
        const newSamples = resample(chunk, 48000, 16000);
        console.log("After sampling:", newSamples);
        const output = document.getElementById("output");
        output.textContent += `Before: ${chunk}\nAfter: ${newSamples}\n\n`;
      }
    }

    const converter = new SpeechConverter();
    const testBtn = document.getElementById("testBtn");

    testBtn.addEventListener("click", () => {
      // Example fake audio chunk
      const fakeChunk = new Float32Array([0, 0.1, -0.1, 0.2, -0.2]);
      converter.processChunk(fakeChunk);
    });
  </script>
</body>
</html>
